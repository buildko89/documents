# 前提条件

箱庭コア機能をインストールするには、Python 3.12、lmdiskのインストールが終わっていることが条件となります。
以下のドキュメントを参照して、事前にインストールしておいてください。

[lmdiskインストール手順](https://github.com/buildko89/documents/blob/main/hakodoc/preinstall-doc/lmdisk_install.md)

[Python3.12インストール手順](https://github.com/buildko89/documents/blob/main/hakodoc/preinstall-doc/python_install.md)

# 箱庭コア機能のダウンロード

箱庭ドローンシミュレータに必要な`箱庭コア機能`をインストールするためのインストーラを入手します。以下のリリースページに`hakoCore-win_vx.x.x.zip`で配布されています。

[箱庭コア機能インストーラ](https://github.com/buildko89/coreinstaller/releases)

# 箱庭コア機能のインストール

`hakoCore-win_vx.x.x.zip`をダウンロードしたら、zipファイルを解凍します。解凍すると、`setup.exe`、`hakocore-win-msi`が解凍されます。

`setup.exe`を右クリックして、管理者として実行をクリックして実行します。

![コア機能インストール1](./core/core1.png)

管理者モードで実行するか？と聞かれるのでOKをクリックしてインストールを実行してください。

![コア機能インストール2](./core/core2.png)

インストール画面が表示されるので、次へ(N)>をクリックして次の画面に進みます。

![コア機能インストール3](./core/core3.png)

インストール フォルダの選択画面が表示されます。インストール先はデフォルトでは`C:¥User¥<ユーザ名>¥AppData¥Roming¥`になります。次へ(N)>をクリックして次の画面に進みます。

インストーラ先のフォルダの変更が必要な場合は変更して、次へ(N)>をクリックして次の画面に進みます。

![コア機能インストール4](./core/core4.png)

⚠️インストール フォルダの選択について
Windows環境でOneDriveが設定されている場合には注意が必要です。OneDriveのバックアップ対象のフォルダ(例：Desktop,Documentsなど)を選択するとOneDriveにリダイレクトされるので注意してください。

インストールの確認画面がが出ますので、次へ(N)>をクリックして次の画面に進みます。

![コア機能インストール5](./core/core5.png)

インストールが始まりますので、しばらく待ちます。

![コア機能インストール6](./core/core6.png)

インストール中に箱庭ドローンシミュレータに必要なPythonライブラリがインストールされます。内容を確認してOKボタンをクリックします。

![コア機能インストール7](./core/core7.png)

インストールが完了するとインストール完了の画面が表示されますので、閉じるをクリックしてインストールを完了します。

![コア機能インストール8](./core/core8.png)

# インストール後の確認

箱庭コア機能がインストールされたことを確認します。

タスクバーのWindowsマークを右クリックして、システムをクリックします。
![コア機能インストール9](./core/core9.png)

システムをクリックするとシステム＞バージョン情報の画面が表示されますので、システムの詳細設定をクリックします。

![コア機能インストール10](./core/core10.png)

システムの詳細設定をクリックすると、システムのプロパティが表示されますので、環境変数をクリックします。

![コア機能インストール11](./core/core11.png)

環境変数をクリックすると環境変数が確認できますので、以下の変数が登録されていることを確認してください。

|変数名|概要|
|:---|:---|
|HAKO_CONFIG_PATH|箱庭コアのコンフィグパス|
|PYTHONPATH|箱庭コアのPythonライブラリパス|

![コア機能インストール12](./core/core12.png)

# ⚠️トラブルシューティング⚠️

## 環境変数が登録されていなかった場合

この場合は、管理者権限モードでインストールができてないことが原因ですので、管理者権限でインストールを実行してください。

## pipの実行が失敗した場合

この場合は、Python 3.12の環境が事前にインストールされていないことが原因です。Python 3.12の環境をインストールして、箱庭コア機能をインストールを管理者権限で実行しなおしてください。

